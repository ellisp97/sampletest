<!doctype HTML>
<html>
	<head>
		<title>Page 2 - JS</title>
		<link rel = 'stylesheet' type = 'text/css' href = 'layoutp2.css'>
		<script src=" https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
	</head>
	<body id = 'bID'>
		<script type="text/javascript">
			setInterval(function(){
				document.body.style.backgroundColor = 'rgb(' + Math.floor(Math.random()*255) + ',' + Math.floor(Math.random()*255) + ',' + Math.floor(Math.random()*255) + ')';
			},10000);

			document.onmousemove = function(event){
				var mousex = event.clientX + 100;
				var mousey = event.clientY - 150 ;
				var arrow = document.getElementById('arrowId');
				var y = mousey - $(arrow).offset().top;
				var x = mousex - $(arrow).offset().left;

				var angle = Math.floor(Math.atan2(y,x)*180/Math.PI);
				var prevangle = Math.atan2(mousex,mousey)*180/Math.PI;

				$(arrow).css('transform','rotate(' + angle + 'deg)');
				//console.log('new' + angle);
				//console.log('old' + prevangle);

				/*function angle2Vec(mousex,mousey,angle,distance){
				angle = angle*(Math.PI/180);
				return mousex + Math.cos(angle)*distance, mousey + Math.sin(angle)*distance;
			}
			distance = Math.sqrt(x*x + y*y);
			console.log('newdistance' + angle2Vec(mousex,mousey,angle,distance)), 10000;*/
			return angle
			};

			setInterval(onmousemove, 10000);

			document.onclick= userClicked;
			function userClicked() {
		    var x = event.clientX -50;
		    var y = event.clientY -50;
		    var blob = document.getElementById("blobimg");
		    var arrow = document.getElementById("arrowId");
		    var blobpos = $(blob).position();
		    var arrowpos = $(arrow).position();
		    blob.style.display = '';
		    blob.style.position = 'absolute';
		    blob.style.left = $(arrow).offset().left + 'px' ;
		    blob.style.top = $(arrow).offset().top + 'px' ;
		    //$(blob).animate({"left":"+=100px"},{"top":"+=100px"}, "fast");

		    $(blob).animate({
		    	left: x + 'px',
		    	top: y + 'px',
		    },500);
			}


		</script>
		<div class "picture">
        <img alt="blobimg" id="blobimg" style="display: none" src="image/blob.png">
    </div>
		<img id = 'arrowId' class = 'imgpos' src ="image/arrow.png"></img>

	</body>
</html>